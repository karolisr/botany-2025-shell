## Package managers: Installing stuff

Research pipelines in population genetics and evolutionary biology juggle many CLI toolsâ€”**`samtools`, `bcftools`, `RAxMLâ€‘NG`, `IQâ€‘TREE`, `PLINK`, `FastQC`, `BLAST+`,** and more. Manually compiling each one wastes time and risks version drift that can invalidate downstream analyses. A package manager:

* **Pins exact versions** so workflows run identically on every machine
* **Resolves dependencies automatically** (e.g., HTSlibâ€¯â†”â€¯samtoolsâ€¯â†”â€¯bcftools)
* **Delivers security patches** for system libraries without manual rebuilding
* **Provides oneâ€‘line cleanup** to reclaim space after large FASTQ/VCF crunches

---

## Two ecosystems at a glance (no extra repositories required)

| Aspect                              | `apt` (Ubuntu/Debian)                                                              | `brew` (macOSâ€¯+â€¯Linux)                                                                                     |
| ----------------------------------- | ---------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| Bioâ€‘relevant packages in core repos | `samtools`, `bcftools`, `mafft`, `raxmlâ€‘ng`, `iqtree`, `blast+`, `fastqc`, `plink` | Same in **Homebrew core** (`samtools`, `bcftools`, `raxmlâ€‘ng`, `iqtree`, `plink`, `fastqc`, `blast`, etc.) |
| Install root                        | Systemâ€‘wide `/usr/bin`, `/usr/lib` (needs `sudo`)                                  | Userâ€‘level Cellar, symlinked to `/usr/local/bin` or `/opt/homebrew/bin` (no `sudo`)                        |
| Upgrade strategy                    | `sudo apt upgrade` / `sudo apt full-upgrade`                                       | `brew upgrade`                                                                                             |
| Cleanup & health check              | `sudo apt autoremove` / `sudo apt clean`                                           | `brew cleanup` & `brew doctor`                                                                             |

---

## Bestâ€‘practice workflowÂ (for standard repos only)

1. **Refresh metadata & upgrade**

   ```bash
   # Ubuntu
   sudo apt update && sudo apt upgrade -y

   # macOS / Linuxbrew
   brew update && brew upgrade
   ```

2. **Search & inspect before installing**

   ```bash
   apt search iqtree | head
   brew info iqtree
   ```

3. **Dryâ€‘run heavy installs** (good on shared HPC nodes)

   ```bash
   sudo apt install --simulate bcftools
   brew install --dry-run iqtree
   ```

4. **Install the toolchain**

   ```bash
   # Population genetics & phylogenomics
   sudo apt install samtools bcftools plink raxml-ng iqtree fastqc blast+

   # Same on macOS
   brew install samtools bcftools plink raxml-ng iqtree fastqc blast
   ```

5. **Pin versions for published pipelines**

   ```bash
   echo "iqtree hold" | sudo dpkg --set-selections    # Ubuntu
   brew pin iqtree                                    # macOS
   ```

6. **Audit & prune monthly**

   ```bash
   sudo apt autoremove --purge
   brew cleanup
   brew outdated
   ```

---

<!-- ## Examples

<details>
<summary>ðŸ§¬Â Call SNPs from BAM to VCF on Ubuntu</summary>

```bash
sudo apt install samtools bcftools
samtools mpileup -Ou -f ref.fa sample.bam | \
  bcftools call -mv -Oz -o sample.vcf.gz
```

Matching **samtoolsâ€¯+â€¯bcftools** builds linked against the same HTSlib avoid ABI mismatches.

</details>

<details>
<summary>ðŸŒ³Â Maximumâ€‘likelihood phylogeny with IQâ€‘TREE on macOS</summary>

```bash
brew install iqtree
iqtree -s alignment.phy -m GTR+G -B 1000 -nt AUTO
open alignment.phy.treefile  # View in FigTree if installed via brew install --cask figtree
```

Homebrew compiles IQâ€‘TREE with native optimizations, accelerating bootstrap analyses.

</details>

<details>
<summary>ðŸ“ŠÂ Prepare genotype matrices for STRUCTURE / ADMIXTURE</summary>

```bash
sudo apt install plink
plink --vcf cohort.vcf --make-bed --out cohort
```

Using the package manager lets collaborators reproduce the exact `plink` build with a single command.

</details>

--- -->

## Troubleshooting quickâ€‘ref

| Issue                                       | `apt` fix                                           | `brew` fix                                                                 |
| ------------------------------------------- | --------------------------------------------------- | -------------------------------------------------------------------------- |
| HTSlib version mismatch                     | `sudo apt install --only-upgrade htslib`            | `brew upgrade htslib samtools bcftools`                                    |
| Missing libraries when compiling R packages | `sudo apt install libcurl4-openssl-dev libxml2-dev` | `brew install libxml2 curl openssl@3 && brew link --force libxml2`         |
| Permission denied                           | Always prefix with `sudo` or check `/etc/sudoers`   | Ensure you own Homebrew dirs: `sudo chown -R $(whoami) $(brew --prefix)/*` |
| Conflicting files                           | `sudo apt --fix-broken install`                     | `brew link --overwrite <pkg>` or `brew unlink <pkg>`                       |

---

### Takeâ€‘home points for lifeâ€‘science researchers

1. **Reproducibility first** â€” lock tool versions before paper submission.
2. **Standard repos suffice** â€” many bioinformatics staples (including **IQâ€‘TREE**) are in default `apt` and Homebrew core.
3. **Simulate big installs** on clusters to dodge quota surprises.
4. **Document your environment** (`apt list --installed > packages.txt`, `brew bundle dump`) and commit alongside your code.

With these habits, your phylogenetic trees, GWAS scans, and floristic datasets will stay **repeatable and transparent**â€”boosting confidence in every published clade and alleleâ€‘frequency plot. Happy analysing!
